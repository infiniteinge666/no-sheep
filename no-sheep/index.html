<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>No Sheep – When Logic Is Outlawed</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <header>
    <img id="logo" class="stage-seed" src="images/no-sheep-logo.png" alt="No Sheep Logo"/>
  </header>

  <div class="container landing">
    <h1 id="headline1" class="fade-seed">When Logic Is Outlawed</h1>
    <h2 id="headline2" class="fade-seed">Rebellion Becomes Duty</h2>

    <p id="tagline" class="tagline copy typewriter type-caret stage-seed"></p>

    <div id="btnGroup" class="btn-group stage-seed">
      <button id="joinToggle" class="btn toggle" aria-expanded="false" aria-controls="joinPanel">
        Join the Rebellion
      </button>
      <a class="btn" href="manifesto.html">Read the Manifesto</a>
    </div>

    <!-- Collapsible Netlify form -->
    <section id="joinPanel" class="collapse">
      <div class="form">
        <h3>Join the Rebellion</h3>
        <form name="join-rebellion" method="POST" data-netlify="true" netlify-honeypot="trap" action="/thanks.html">
          <input type="hidden" name="form-name" value="join-rebellion"/>
          <p class="honeypot"><label>Leave this field empty: <input name="trap"/></label></p>

          <div class="row">
            <p><label>Alias (no real names)<br/><input type="text" name="alias" maxlength="60" required/></label></p>
            <p><label>Preferred Contact (optional)<br/>
              <select name="contact_method">
                <option value="">Choose one (optional)</option>
                <option>Reply by email</option><option>Signal</option><option>Matrix</option><option>Other</option>
              </select></label></p>
          </div>

          <p><label>Message (why you’re here)<br/><textarea name="message" required></textarea></label>
            <small>Tip: do not include private info. We value anonymity.</small></p>

          <p><label>Return address / handle (optional)<br/>
            <input type="text" name="return_handle" placeholder="Your burner (email, @matrix:server, Signal #, etc.)"/></label></p>

          <div class="btn-group"><button class="btn" type="submit">Send</button></div>
        </form>

        <p style="text-align:center;margin-top:10px;">Prefer direct mail? Use the fallback button (address is obfuscated on the client).</p>
        <div class="btn-group"><a id="jr" class="btn" href="#" rel="nofollow noopener">Secure Email</a></div>
      </div>
    </section>
  </div>

  <script>
    // Cinematic entrance (landing)
    document.addEventListener('DOMContentLoaded', () => {
      const logo     = document.getElementById('logo');
      const h1       = document.getElementById('headline1');
      const h2       = document.getElementById('headline2');
      const tagline  = document.getElementById('tagline');
      const btnGroup = document.getElementById('btnGroup');

      // 1) Logo
      setTimeout(() => { logo.classList.add('fade-in'); }, 300);
      // 2) H1
      setTimeout(() => { h1.classList.remove('fade-seed'); h1.classList.add('fade-down'); }, 1500);
      // 3) H2
      setTimeout(() => { h2.classList.remove('fade-seed'); h2.classList.add('fade-down'); }, 3000);
      // 4) Tagline type
      const text  = "A movement for the thinkers, the misfits, and the rational rebels who see the cracks in the system and refuse to be herded.";
      const speed = 22; // ms per char
      setTimeout(() => {
        tagline.classList.remove('stage-seed');
        typeText(tagline, text, speed, () => {
          // 5) Buttons last
          btnGroup.classList.add('fade-in');
        });
      }, 4400);
    });

    function typeText(el, text, speed, done){
      el.textContent=""; let i=0;
      (function tick(){ if(i<=text.length){ el.textContent=text.slice(0,i++); setTimeout(tick,speed); }
        else { el.classList.remove('type-caret'); if(typeof done==="function") done(); } })();
    }

    // Collapse toggle + reveal animation is handled by CSS .collapse.open
    (function () {
      const btn = document.getElementById('joinToggle');
      const panel = document.getElementById('joinPanel');
      if (!btn || !panel) return;
      btn.addEventListener('click', () => {
        const open = panel.classList.toggle('open');
        btn.setAttribute('aria-expanded', open ? 'true' : 'false');
      });
    })();

    // Obfuscated mailto fallback (stormvector924@tutamail.com)
    (function () {
      const p1="c3Rvcm12ZWN0b3I5Mj", p2="RAdHV0YW1haWwuY2", p3="9t";
      try {
        const addr=atob(p1+p2+p3), a=document.getElementById("jr");
        if(a){ const subject="Join the Rebellion", body="Tell us why you're here. PGP available on request.";
          a.href="mailto:"+addr+"?subject="+encodeURIComponent(subject)+"&body="+encodeURIComponent(body);
          a.setAttribute("aria-label","Email No Sheep HQ securely");
        }
      } catch(e){}
    })();
  </script>
</body>
</html>
